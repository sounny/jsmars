<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSMARS - JMARS for the Web</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  const fixedOverlays = new FixedOverlays(jmars, 'fixed-overlays');
  const searchBar = new SearchBar(jmars.map, 'search-bar-container');

  // Initialize Crater Tool
  const craterLayer = new CraterLayer(jmars.map);
  const craterTable = new CraterTable('crater-table-container');

  const craterBtn = document.getElementById('crater-tool-btn');
  craterBtn.addEventListener('click', () => {
  if (craterLayer.isActive) {
  craterLayer.deactivate();
  craterBtn.innerText = 'Start Crater Counting';
  craterBtn.classList.remove('active');
  } else {
  // Deactivate other tools
  profileTool.deactivate();
  profileBtn.innerText = 'Radial Profile';
  profileBtn.classList.remove('active');

  craterLayer.activate();
  craterBtn.innerText = 'Stop Crater Counting';
  craterBtn.classList.add('active');
  }
  });

  // Initialize Radial Profile Tool
  const profileTool = new RadialProfileTool(jmars.map);
  const profileChart = new ProfileChart('profile-chart-container');

  const profileBtn = document.getElementById('profile-tool-btn');
  profileBtn.addEventListener('click', () => {
  if (profileTool.isActive) {
  profileTool.deactivate();
  profileBtn.innerText = 'Radial Profile';
  profileBtn.classList.remove('active');
  } else {
  // Deactivate other tools
  craterLayer.deactivate();
  craterBtn.innerText = 'Start Crater Counting';
  craterBtn.classList.remove('active');

  profileTool.activate();
  profileBtn.innerText = 'Stop Profile';
  profileBtn.classList.add('active');
  }
  });

  // Handle errors
  window.addEventListener('unhandledrejection', function (event) {
  console.error("Unhandled rejection:", event.reason);
  if (layerListContainer.innerText.includes('Loading')) {
  layerListContainer.innerHTML = `<div class="error-msg">Error loading layers: ${event.reason.message}</div>`;
  }
  });
  });
  </script>
  </body>

</html>